---
title: "Wikileaks Twitter DM"
author: '@_colinfay'
date: "`r Sys.Date()`"
fig_width: 10
fig_height: 4 
navlink: "[Wikileaks Twitter DM](https://colinfay.me/wikileaksdm)"
og:
  type: "article"
  title: "Wikileaks Twitter DM"
footer:
  - content: '<a href="https://colinfay.me">colinfay.me</a> â€¢ <a href="https://twitter.com/_ColinFay">@_colinfay</a><br/>'
output: markdowntemplates::skeleton
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)

library(tidyverse)
library(lubridate)
library(fontawesome)
library(DT)
dt <- partial(datatable,
  extensions = "Buttons",
  options = list(scrollX = TRUE, dom = "Bfrtip", buttons = c("copy", "csv"))
)

colours <- c(
  "#973232", "#1E5B5B", "#6D8D2F", "#287928",
  "#E18C8C", "#548787", "#B8D283", "#70B470",
  "#B75353", "#326E6E", "#8CAA4E", "#439243",
  "#711515", "#0D4444", "#4D6914", "#115A11",
  "#490101", "#012C2C", "#2E4401", "#013A01"
)

library(dygraphs)
dg <- function(x, main, col = 1, fillGraph = TRUE) {
  r <- x %>%
    count(date(date)) %>%
    rename(date = `date(date)`)
  rownames(r) <- r$date
  r %>%
    select(n) %>%
    dygraph(main = main, width = "100%") %>%
    dyRangeSelector(height = 40) %>%
    dyOptions(colors = colours[col], fillGraph, fillAlpha = 0.7)
}

ggcount <- function(x, main, col = 1) {
  x %>%
    count(date(date)) %>%
    rename(date = `date(date)`) %>%
    ggplot() +
    aes(date, n) +
    geom_line(color = colours[col]) +
    geom_area(fill = colours[col], alpha = 0.7) +
    labs(
      title = main,
      subtitle = "Data via Emma Best - https://emma.best",
      x = "Date",
      y = "Number of DMs"
    ) + 
    th()
}

th <- function(axis.text = element_text(size = 10),
               axis.title = element_text(size = 15),
               title = element_text(size = 20),
               plot.subtitle = element_text(size = 10),
               plot.title = element_text(margin = margin(0, 0, 20, 0), size = 18, hjust = .5),
               axis.title.x = element_text(margin = margin(20, 0, 0, 0)),
               axis.title.y = element_text(margin = margin(0, 20, 0, 0)),
               legend.text = element_text(size = 10),
               plot.margin = margin(10, 10, 10, 10),
               panel.background = element_rect(fill = "white"),
               panel.grid.major = element_line(colour = "grey"),
               text = element_text(family = "Arimo"),
               ...) {
  theme_minimal() +
    theme(
      axis.text = axis.text,
      axis.title = axis.title,
      title = title,
      plot.title = plot.title,
      plot.subtitle = plot.subtitle,
      axis.title.x = axis.title.x,
      axis.title.y = axis.title.y,
      legend.text = legend.text,
      plot.margin = plot.margin,
      panel.background = panel.background,
      panel.grid.major = panel.grid.major,
      text = text,
      ...
    )
}
```

<style>
@import url('https://fonts.googleapis.com/css?family=Nunito+Sans:400,700');

body{
  font-family: 'Nunito Sans';
}

h2 {
  border-bottom: 2px solid darkgrey;
}
h3:before {
    content: "> ";
    margin-right: 6px;
}
h4 {
  text-align: center;
  font-size: 2em;
}
.dataTables_wrapper{
  padding-bottom: 30px ;
}

div .dygraphs {
  margin-bottom: 30px ;
}

details {
    margin-bottom: 30px;
}
</style>

## About

On the 29th of July 2018, Emma Best published on her website the copy of 11k+ wikileaks Twitter DM : <https://emma.best/2018/07/29/11000-messages-from-private-wikileaks-chat-released/>

Here is a data extraction and wrangling of this corpus, to make it easily searchable, extractable and sharable. 

## How to use this page 

+ Every "`r fa("download")` [link.csv](link.csv)" is a downloadable csv.
+ You can search and order every table. Results of the search are downloadable as csv or can be copied in the clipboard.
+ You can zoom in the time series by selecting the date range. You can also use the selector beside to choose this range. Double click to reset the settings.
+ Under each dynamic plot, you can find a static plot by clicking on "Static plot".

## The datasets: 

### List of all DMs

A dataset with 3 columns: 

+ text: extracted text 
+ date: date of the dm
+ user: user who sent the dm

#### `r fa("download")` [wikileaks_dm.csv](wikileaks_dm.csv)

```{r}
full <- read_csv("wikileaks_dm.csv") 
full %>% 
  dt()
```

## Count of daily DMs

A dataset with 2 columns 

+ date: the date
+ n: number of DMs 

#### `r fa("download")` [daily.csv](daily.csv)

```{r}
read_csv("daily.csv") %>%
  dt()
```

```{r}
dg(full, main = "DMs by day, 2015-2017", col = 1)
```

<details>
<summary>Static plot</summary>
```{r fig.width=10, fig.height=6}
ggcount(full, main = "Wikileaks Twitter DM - DMs by day, 2015-2017", col = 1) 
```
</details>

## DMs by year 

3 datasets (1 per year), each with 3 columns: 

+ text: extracted text 
+ date: date of the dm
+ user: user who sent the dm

### 2015

#### `r fa("download")` [2015.csv](2015.csv)

```{r}
quinze <- read_csv("2015.csv") 
quinze %>% 
  dt()
```

```{r}
dg(quinze, main = "DMs by day, 2015", col = 2)
```

<details>
<summary>Static plot</summary>

```{r fig.width=10, fig.height=6}
ggcount(quinze, main = "Wikileaks Twitter DM - DMs by day, 2015", col = 2)
```

</details>

### 2016

#### `r fa("download")` [2016.csv](2016.csv)

```{r}
seize <- read_csv("2016.csv")
seize %>% 
  dt()
```

```{r}
dg(seize, main = "DMs by day, 2016", col = 3)
```

<details>
<summary>Static plot</summary>

```{r fig.width=10, fig.height=6}
ggcount(seize, main = "Wikileaks Twitter DM - DMs by day, 2016", col = 3)
```

</details>

### 2017

#### `r fa("download")` [2017.csv](2017.csv)

```{r}
dixsept <- read_csv("2017.csv") 
dixsept %>% 
  dt()
```


```{r}
dg(dixsept, main = "DMs by day, 2017", col = 4)
```

<details>
<summary>Static plot</summary>

```{r fig.width=10, fig.height=6}
ggcount(dixsept, main = "Wikileaks Twitter DM - DMs by day, 2017", col = 4)

```

</details>

## Count of user participation

A dataset with 2 columns 

+ user: the user
+ n: number of DMs in the corpus

#### `r fa("download")` [user_count.csv](user_count.csv)

```{r}
read_csv("user_count.csv") %>% 
  dt()
```

```{r fig.width=10, fig.height=6}
read_csv("user_count.csv") %>% 
  ggplot() + 
  aes(reorder(user, n), n) +
  geom_col(fill=colours[5]) +
  coord_flip() +
    labs(
      title = "User participation",
      subtitle = "Data via Emma Best - https://emma.best",
      x = " ",
      y = "Number of DMs"
    ) + 
    th()
```

### DMs by users

15 datasets (1/user), each with 3 columns: 

+ text: extracted text 
+ date: date of the dm
+ user: user who sent the dm

#### `r fa("download")` [user_Bean.csv](user_Bean.csv)
#### `r fa("download")` [user_Cabledrum.csv](user_Cabledrum.csv)
#### `r fa("download")` [user_DMConversationEntry.csv](user_DMConversationEntry.csv)
#### `r fa("download")` [user_Emmy.B.csv](user_Emmy.B.csv)
#### `r fa("download")` [user_LibertarianLibrarian.csv](user_LibertarianLibrarian.csv)
#### `r fa("download")` [user_M.csv](user_M.csv)
#### `r fa("download")` [user_Matt.Watt.csv](user_Matt.Watt.csv)
#### `r fa("download")` [user_noll.csv](user_noll.csv)
#### `r fa("download")` [user_SAWC.Sydney.csv](user_SAWC.Sydney.csv)
#### `r fa("download")` [user_voidiss.csv](user_voidiss.csv)
#### `r fa("download")` [user_WikiLeaks.Press.csv](user_WikiLeaks.Press.csv)
#### `r fa("download")` [user_WikiLeaks.Task.Force.csv](user_WikiLeaks.Task.Force.csv)
#### `r fa("download")` [user_WikiLeaks.csv](user_WikiLeaks.csv)
#### `r fa("download")` [user_WISE.Up.Action.csv](user_WISE.Up.Action.csv)
#### `r fa("download")` [user_WISE.Up.Wales.csv](user_WISE.Up.Wales.csv)

## Mentions

DMs that contains a mention to a Twitter account. 

A dataset with 4 columns 

+ mention: the mentioned account
+ text: extracted text 
+ date: the date
+ user: user who sent the dm

#### `r fa("download")` [mentions.csv](mentions.csv)

```{r}
read_csv("mentions.csv") %>% 
  dt()
```

### Count of the mentions:

A dataset with 2 columns 

+ mention: the mention
+ n: number of DMs 

#### `r fa("download")` [mentions_count.csv](mentions_count.csv)

```{r}
read_csv("mentions_count.csv") %>% 
  dt()
```

## Urls

Extracted links, (starting with `http`). 

A dataset with 4 columns 

+ url: the found url
+ text: extracted text 
+ date: the date
+ user: user who sent the dm

#### `r fa("download")` [urls.csv](urls.csv)

```{r}
read_csv("urls.csv") %>% 
  dt()
```

## Methodology 

Everything has been done in R. 

Methodology is described in [methodo](methodo.html)
